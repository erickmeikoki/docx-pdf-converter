[build]
builder = "nixpacks"
buildCommand = "nix-env -iA nixpkgs.libreoffice && pip install -r requirements.txt"

[deploy]
startCommand = "gunicorn app:app"
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[deploy.env]
PYTHONUNBUFFERED = "1"
FLASK_ENV = "production"
FLASK_APP = "app.py"
PATH = "/nix/var/nix/profiles/default/bin:$PATH" 